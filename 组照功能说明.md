# 组照功能使用说明

## ⚠️ 重要：首先需要执行数据库迁移

在使用组照功能之前，**必须**先在 Supabase SQL Editor 中执行以下 SQL 脚本：

**文件位置**: `supabase/add_photo_series.sql`

**执行步骤**:
1. 登录 Supabase Dashboard
2. 进入项目
3. 点击左侧菜单的 "SQL Editor"
4. 点击 "New Query"
5. 复制 `supabase/add_photo_series.sql` 文件的全部内容
6. 粘贴到编辑器中
7. 点击 "Run" 执行

**此脚本将会**:
- 创建 `photo_series` 表（组照主表）
- 创建 `photo_series_images` 表（组照图片表）
- 创建 `photo_series_categories` 表（组照分类关联）
- 创建 `photo_series_likes` 表（组照点赞）
- 创建 `photo_series_comments` 表（组照评论）
- 创建 `photo_series_judge_scores` 表（组照评分）
- 修改 `photos` 表，添加 `type` 和 `series_id` 字段
- 创建所有必要的索引和 RLS 安全策略

## 功能说明

### 上传页面 (`/upload`)
- ✅ 已实现：单幅/组照类型选择
- ✅ 已实现：组照上传 4-6 张图片
- ✅ 已实现：图片预览、排序、删除
- ✅ 已实现：智能压缩和上传

### 待更新的页面
以下页面需要更新以支持组照显示：

1. **我的作品页** (`/my-photos`) - 需要加载并显示组照
2. **作品展示页** (`/gallery`) - 需要显示组照
3. **作品详情页** (`/photo/[id]`) - 需要支持组照轮播
4. **评委打分页** (`/judge`) - 需要支持组照评分
5. **数据导出** (`/admin/export`) - 需要包含组照数据

## 常见问题

### Q: 组照上传后看不到？
A: 请确保已经执行了数据库迁移脚本。可以在浏览器控制台查看错误信息。

### Q: 提示表不存在？
A: 说明数据库迁移脚本还没有执行，请按照上述步骤执行。

### Q: 单幅和组照如何计数？
A: 每个单幅作品算 1 组，每个组照（4-6张图片）也算 1 组。如果限制是 5 组，你可以上传：
- 5 个单幅作品，或
- 5 个组照，或
- 任意组合（如 3 个单幅 + 2 个组照）
